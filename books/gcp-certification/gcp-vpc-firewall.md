---
title: "ファイアウォール"
---
# ファイアウォールとは
ファイアウォールとは、コンピュータやネットワークとの通信を設定したポリシーに従って許可または拒否するセキュリティ機能のことです。  
例えばクラウドの外からアクセスしてくるユーザの端末とCE間のネットワーク通信を制御します。  
![](https://storage.googleapis.com/zenn-user-upload/00f7405786bf-20220507.png =400x)

# ファイアーウォールルールの設定要素^[<https://cloud.google.com/vpc/docs/firewalls?hl=ja>]
ユーザが定義したファイアウォールルールを利用して、Google Cloudサービスへのアクセスを制御します。  
Google Cloudではデフォルトで外部IPアドレスのTCPポート25（SMTP）を宛先とする通信は許可されません。
![](https://storage.googleapis.com/zenn-user-upload/087d17fda316-20220507.png =600x)

## トラフィックの方向
ファイアウォール ルールの方向は、上り（内向き）と下り（外向き）のいずれかです。方向は常に、ファイアウォール ルールが適用される VM（ターゲット）の視点から定義されます。
上り（内向き）方向は、送信元からターゲットに送信される接続を表します。
![](https://storage.googleapis.com/zenn-user-upload/da8a6350f1d4-20220507.png =400x)
下り（外向き）方向は、ターゲットから宛先に送信されるトラフィックを表します。
![](https://storage.googleapis.com/zenn-user-upload/10d8d3f3c347-20220507.png =400x)
方向を指定しない場合、Google Cloud は上り（内向き）を使用します。


## 優先度
ファイアウォール ルールの優先度は、0 から 65535 までの整数です。小さい整数が高い優先度を示します。ルールの作成時に優先度を指定しない場合、優先度 1000 が割り当てられます。

## 一致したときのアクション
ファイアウォール ルールのアクション コンポーネントでは、ルールの他のコンポーネントに従って、トラフィックを許可するかブロックするかが決定されます。
allow アクションは、他の指定されたコンポーネントと一致する接続を許可します。
deny アクションは、他の指定されたコンポーネントと一致する接続をブロックします。
:::message alert
ファイアウォール ルールのアクション コンポーネントは 1 つのみです。同じルールに allow と deny の両方を指定することはできません。ルールの適用順序を定義するには、優先度の異なるファイアウォール ルールを個別に作成します。
:::

## 送信元、宛先、ターゲット
作成するファイアウォール ルールの方向に応じて、送信元または宛先のいずれかを指定します（両方ではありません）。

## プロトコルとポート
プロトコル、またはプロトコルと宛先ポートを指定すると、ファイアウォール ルールの範囲を狭めることができます。プロトコル、またはプロトコルと宛先ポートの組み合わせを指定できます。プロトコルとポートの両方を省略した場合、ファイアウォール ルールは、任意のプロトコルと任意の宛先ポートの、すべてのトラフィックに適用されます。指定できるのは宛先ポートだけです。送信元ポートに基づくルールはサポートされていません。
![](https://storage.googleapis.com/zenn-user-upload/85f86f62e19c-20220507.png =400x)